/* ===== Global Theme ===== */
:root{
  --size: min(86vmin, 560px);
  --bg1: #ffe9f3;
  --bg2: #e8f6ff;
  --bg3: #ecffe8;
  --card: rgba(255,255,255,.6);
  --text: #2b2b2b;
  --accent: #ff6b9e;
}

/* Mobile Defaults & iOS Tweaks */
html, body { height: 100%; }
html { -webkit-text-size-adjust: 100%; }
* { -webkit-tap-highlight-color: transparent; }

body{
  margin:0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial,
             "Apple Color Emoji","Segoe UI Emoji","Noto Color Emoji";
  color: var(--text);

  /* Sichere Höhe auf iOS: zuerst 100dvh (moderne Geräte), Fallback svh */
  min-height: 100dvh;
  /* Fallback für ältere iOS: */
  min-height: 100svh;

  display:flex; align-items:center; justify-content:center;
  background: radial-gradient(1200px 1200px at 20% 10%, var(--bg1), transparent 60%),
              radial-gradient(1000px 1000px at 80% 0%, var(--bg2), transparent 55%),
              radial-gradient(1200px 900px at 50% 100%, var(--bg3), transparent 60%),
              linear-gradient(135deg, #fefcff, #f5fbff 55%, #fafff7);
  overflow:hidden;
  overscroll-behavior: none;
  padding-bottom: env(safe-area-inset-bottom, 0);
}

body::before{
  content:""; position:fixed; inset:-10%;
  background: radial-gradient(60px 60px at 15% 20%, #ffd6e7aa 30%, transparent 32%),
              radial-gradient(50px 50px at 85% 25%, #cdefffaa 30%, transparent 32%),
              radial-gradient(70px 70px at 30% 80%, #d6ffd0aa 30%, transparent 32%),
              radial-gradient(40px 40px at 70% 75%, #ffe7cdcc 30%, transparent 32%);
  filter: blur(12px);
  animation: floaty 24s linear infinite alternate;
  z-index:0; pointer-events:none;
}
@keyframes floaty{ to{ transform: translateY(-3%) translateX(2%);} }

/* Floating hearts */
.bg-hearts{ position:fixed; inset:0; pointer-events:none; z-index:0; }
.bg-hearts .heart{
  position:absolute; font-size: clamp(16px, 3.5vmin, 28px);
  opacity:.25; animation: rise linear infinite; will-change: transform, opacity;
}
@keyframes rise{ from{ transform: translateY(8svh) scale(.9); opacity:.0 } to{ transform: translateY(-100svh) scale(1.1); opacity:.35 } }

/* App card */
.app{ position:relative; z-index:1; width: min(94vw, 720px); padding: env(safe-area-inset-top) env(safe-area-inset-left) env(safe-area-inset-bottom) env(safe-area-inset-right); }
.card{
  background: var(--card);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(255,255,255,.7);
  box-shadow: 0 8px 24px rgba(0,0,0,.08);
  border-radius: 22px;
  padding: clamp(12px, 3.2vmin, 20px);
}
.title{ text-align:center; margin: 6px 0 12px; font-weight:700; letter-spacing:.2px; }

/* Wheel */
.wheel-wrap{ position:relative; margin-inline:auto; width: var(--size); height: var(--size); }
.wheel{
  width:100%; height:100%; border-radius:50%; overflow:visible; display:block;
  /* iOS: bessere Transform-Performance */
  transform: translateZ(0);
  will-change: transform;
}

/* Pointer */
.pointer{
  position:absolute; top:-10px; left:50%; transform: translateX(-50%);
  width:0; height:0; border-left: 16px solid transparent; border-right: 16px solid transparent;
  border-bottom: 26px solid var(--accent);
  filter: drop-shadow(0 4px 6px rgba(0,0,0,.18));
}

/* Controls */
.controls{ display:flex; gap:12px; justify-content:center; margin-top: clamp(12px, 2.6vmin, 18px); flex-wrap:wrap; }
.btn{
  appearance:none; border:none; cursor:pointer; font-weight:700; letter-spacing:.2px;
  padding: .9em 1.2em; border-radius: 16px; min-width: 140px;
  background: linear-gradient(135deg, #ff93b9, #ff6b9e);
  color:white; box-shadow: 0 8px 16px rgba(255, 107, 158, .35);
  transition: transform .12s ease, box-shadow .12s ease, filter .2s ease;
  touch-action: manipulation;
}
.btn:hover{ transform: translateY(-1px); box-shadow: 0 10px 18px rgba(255, 107, 158, .42); }
.btn:active{ transform: translateY(1px); }
.btn:disabled{ opacity:.6; filter: grayscale(.2); cursor:not-allowed; }
.btn-secondary{ background: linear-gradient(135deg,#9ad8ff,#6abbff); }

/* Result */
.result{ margin-top: clamp(14px, 3vmin, 22px); text-align:center; }
.result .text{
  font-size: clamp(22px, 5.6vmin, 40px);
  font-weight: 800;
  line-height: 1.2; letter-spacing:.2px;
  text-shadow: 0 1px 0 #fff, 0 10px 24px rgba(0,0,0,.08);
}

/* Overlay */
.overlay{ position:fixed; inset:0; background: rgba(0,0,0,.25);
          display:none; align-items:center; justify-content:center; z-index:6; }
.overlay[aria-hidden="false"]{ display:flex; }
.overlay-card{
  background: rgba(255,255,255,.95); border-radius: 22px; padding: 22px 26px;
  max-width: min(92vw, 520px); text-align:center; box-shadow: 0 10px 30px rgba(0,0,0,.18);
  animation: popin .35s ease;
}
@keyframes popin{ from{ transform: translateY(10px) scale(.98); opacity:0 } to{ transform: translateY(0) scale(1); opacity:1 } }
.overlay-emoji{ font-size: clamp(56px, 18vmin, 140px); line-height:1; display:block; }
.overlay-title{ font-size: clamp(18px, 5vmin, 28px); font-weight:800; margin: 10px 0 6px; }
.overlay-sub{ opacity:.7; font-size: clamp(14px, 3.6vmin, 16px); }
.overlay-media img, .overlay-media video{
  max-width: min(80vw, 420px);
  max-height: 60vh;
  border-radius: 14px;
  display:block;
  margin-inline:auto;
  box-shadow: 0 8px 22px rgba(0,0,0,.18);
}

/* Hearts burst */
.burst{ position:fixed; inset:0; pointer-events:none; z-index:5; }
.burst .p{ position:absolute; font-size: clamp(18px, 4vmin, 28px); will-change: transform, opacity; }
@keyframes pop{
  0%{ transform: translate(0,0) scale(0.4) rotate(0turn); opacity:1 }
  80%{ opacity:1 }
  100%{ transform: translate(var(--dx), var(--dy)) scale(1.1) rotate(.6turn); opacity:0 }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration: .001ms !important; animation-iteration-count: 1 !important; transition-duration: 0ms !important; }
}
